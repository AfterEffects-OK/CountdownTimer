# 多機能カウントダウンタイマー

動画再生やプレゼンテーション、ゲーム配信など、様々な用途で使える高機能なカウントダウンタイマーです。

## 主な機能

- **基本カウントダウン**: 時・分・秒を設定してタイマーを開始できます。
- **再生開始遅延時間の設定**: 動画の再生済み時間などを考慮し、タイマーの開始時間を調整できます。
- **プリセット管理**: よく使うタイマー設定を名前を付けて保存し、いつでも呼び出し、編集、削除が可能です。
- **別ウィンドウ表示**: タイマー表示部分だけを別ウィンドウで開き、操作画面と表示を同期させることができます。
  - 表示用ウィンドウは、ウィンドウサイズに合わせてタイマーの文字サイズが自動で調整されます。
  - 表示用ウィンドウの背景色と不透明度を自由に設定できます（OBS等での利用に便利です）。
- **経過時間の表示**: タイマー動作中に、残り時間と経過時間の表示をいつでも切り替えられます。
- **全画面表示**: 現在のウィンドウを、誤操作の心配がない表示専用モードに切り替えることができます。
- **直感的な時間操作**:
  - **マウスホイール**: 時間入力フィールド上でマウスホイールを操作すると、値を増減できます。
  - **タッチフリック**: スマートフォンなどで時間入力フィールドを上下にフリックすると、値を増減できます。
  - **連動する単位**: 秒や分を操作して `0` や `59` を超えると、隣の単位が自動で繰り上がり・繰り下がりします。
- **キーボードショートカット**: スペースキーでタイマーの「スタート / 一時停止 / 再開」を操作できます。
- **視覚的なフィードバック**:
  - タイマー終了10秒前から数字が黄色に変わります。
  - タイマー終了時には数字が赤くなり、点滅アニメーションで知らせます。

---

## 使い方

### 1. 基本的なタイマーの開始

1.  **タイマー設定**: 「時」「分」「秒」の各フィールドに時間を入力します。
    -   フィールド上でマウスホイールを回すか、上下にフリックすることでも時間を調整できます。
2.  **スタート**: 青色の「スタート」ボタンを押すと、カウントダウンが開始します。

### 2. タイマーの操作

- **一時停止**: タイマー動作中にオレンジ色の「一時停止」ボタンを押すと、カウントダウンが止まります。
- **再開**: 一時停止中に緑色の「再開」ボタンを押すと、カウントダウンが再び始まります。
- **リセット**: 赤色の「リセット」ボタンを押すと、タイマーが設定された初期時間に戻ります。
- **スペースキー**: 入力欄にフォーカスが当たっていない状態でスペースキーを押すと、「スタート / 一時停止 / 再開」の操作ができます。
- **表示の切り替え**: タイマーの上にある「経過時間を表示」/「残り時間を表示」ボタンを押すと、メインの表示が切り替わります。経過時間は、設定した「再生開始遅延時間」を含んだトータルの経過時間です。

### 3. 再生開始遅延時間（オフセット）の利用

これは、例えば「動画の再生が30秒進んだ時点からタイマーを合わせたい」といった場合に使用します。

1.  **遅延時間の設定**: 「再生開始遅延時間」の「分」「秒」に、すでに経過した時間を入力します。
2.  **スタート**: スタートボタンを押すと、タイマーは **「設定時間 - 遅延時間」** からカウントダウンを開始します。
    -   例: タイマーを `5:00` に設定し、遅延時間を `0:30` に設定すると、タイマーは `4:30` からスタートします。

### 4. プリセット機能

よく使う設定を保存しておくことができます。

- **保存**:
    1.  タイマー設定と遅延時間を入力します。
    2.  「プリセット名を入力...」の欄に分かりやすい名前を入力します。
    3.  「保存」ボタンを押します。
    -   ※同じ名前で保存すると、設定が上書き（編集）されます。

- **読み込み**:
    1.  ドロップダウンリストから使いたいプリセットを選択します。
    2.  緑色の「読み込み」ボタン（下矢印アイコン）を押すと、設定が入力フィールドに反映されます。

- **削除**:
    1.  ドロップダウンリストから削除したいプリセットを選択します。
    2.  赤色の「削除」ボタン（ゴミ箱アイコン）を押します。

### 5. 別ウィンドウでのタイマー表示

操作画面とタイマー表示を分けたい場合に便利です。（例: 配信ソフトOBSでタイマー画面のみを視聴者に見せる）

1.  **背景設定（任意）**: コントロールパネル下部の「別ウィンドウ背景設定」で、カラーピッカーとスライダーを使って背景色と不透明度を調整します。OBS等で背景を透過させたい場合は、不透明度を0%に設定します。
2.  **ウィンドウを開く**: 「タイマーを別ウィンドウで表示」ボタンを押します。
3.  新しいウィンドウ（またはタブ）が開き、タイマー表示部分だけが表示されます。
3.  元のウィンドウでタイマーを操作すると、別ウィンドウの表示もリアルタイムで同期します。
4.  表示用ウィンドウは、ウィンドウサイズを変更したりフルスクリーンにしたりすると、タイマーの文字が自動的に最適な大きさに調整されます。

### 6. 全画面表示（表示専用モード）

タイマー実行中の誤タップなどを防ぎたい場合に、現在のウィンドウを操作不能な表示専用モードに切り替えることができます。

1.  タイマーの上にある「全画面表示」ボタンを押します。
2.  コントロールパネルや操作ボタンが非表示になり、タイマーと「のこり時間/経過時間」ラベルのみが表示されます。
3.  元の操作画面に戻るには、右上に表示される「通常表示に戻る」ボタンを押すか、キーボードの `Esc` キーを押します。

## 技術的な仕様

- **UIフレームワーク**: Tailwind CSS
- **データ保存**:
  - 遅延時間、プリセット設定、別ウィンドウの背景設定は、ブラウザの `localStorage` に保存されます。
- **タブ間同期**:
  - 別ウィンドウ表示機能は `BroadcastChannel API` を使用しています。このため、同期は**同じPC・同じブラウザ内**でのみ機能します。

## 推奨環境

快適にご利用いただくために、以下の環境を推奨します。

- **PCブラウザ**:
  - Google Chrome (最新版)
  - Mozilla Firefox (最新版)
  - Microsoft Edge (最新版)
  - Safari (バージョン 15.4 以降)
    - ※別ウィンドウ表示機能は、`BroadcastChannel API` をサポートするブラウザで動作します。Safari 15.3以前のバージョンではこの機能が動作しない場合があります。

- **スマートフォンブラウザ**:
  - 各OSの標準ブラウザ（Safari, Chrome）の最新バージョンで動作しますが、一部の高度な機能（別ウィンドウ表示など）はPCでの利用を想定しています。

## 注意事項

- このタイマーはクライアントサイド（ブラウザ上）のみで動作します。ブラウザを完全に閉じるとタイマーの動作は停止します。
- 別ウィンドウ表示機能は、異なるデバイス間（例: PCとスマホ）での同期には対応していません。